import{a as p,j as s}from"./QueryClientProvider-8Ly9q1Dj.js";import{u as m,a as h,b as x,F as a,c as g}from"./App-VPmrma5G.js";import"./index-5BxWyWw0.js";function S(){const[o,n]=p.useState(""),i=m(),{login:u}=h(),r=x({mutationFn:({username:e,password:t})=>g.post("/v1/auth/login",{username:e,password:t},{headers:{},withCredentials:!0}),onSuccess:e=>{console.log("data",e.data.user.role),u({isAdmin:e.data.user.role==="ADMIN"}),i("/me")},onError:e=>{console.log(e),n(e.response.data.error)}}),c=e=>{e.preventDefault();const t=new FormData(e.target),l=t.get("username"),d=t.get("password");r.mutate({username:l,password:d})};return s.jsxs("div",{children:[s.jsxs("form",{onSubmit:c,children:[s.jsx(a,{inputProps:{placeholder:"Usuario...",name:"username",type:"text"},labelProps:{children:"Usuario"}}),s.jsx(a,{inputProps:{placeholder:"Contrase침a...",name:"password",type:"password"},labelProps:{children:"Contrase침a"}}),s.jsx("button",{type:"submit",children:"Iniciar Sesi칩n"})]}),r.isError&&s.jsx("div",{children:o}),r.isSuccess&&s.jsx("div",{children:"Sesi칩n iniciada correctamente!"})]})}export{S as default};
