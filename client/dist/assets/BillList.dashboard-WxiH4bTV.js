import{a as r,O as p,j as e}from"./QueryClientProvider-8Ly9q1Dj.js";import{d as g,f as j,b,e as a,L as f,h as w,c as d}from"./App-VPmrma5G.js";import"./index-5BxWyWw0.js";function S(){const{venueId:t}=g(),[E,o]=r.useState(""),[y,l]=r.useState(""),[c,n]=r.useState(!1),u=p(),{data:i,isLoading:x,isError:h}=j({queryKey:["bills_details",t],queryFn:async()=>(await d.get(`/v1/admin/${t}/get-bills`)).data}),m=b({mutationFn:s=>d.delete(`/v1/admin/${t}/delete-bill`,{headers:{},data:{billId:s},withCredentials:!0}),onSuccess:()=>{l("table deleted"),u.invalidateQueries({queryKey:["bills_details",t]})},onError:s=>{console.log(s),o(s.response.data.error)}});return x?e.jsx("div",{children:"Cargando..."}):h?e.jsx("div",{children:"Error al cargar los detalles de la mesa"}):e.jsx("div",{className:"bg-blue-200 ",children:e.jsxs("div",{children:[i.map(s=>e.jsxs(a,{dir:"row",space:"sm",children:[e.jsx(f,{to:`${s.id}`,className:w("w-fit px-2 py-1 rounded-full",{"bg-violet-500":s.status==="OPEN","bg-red-500":s.status==="CLOSED","bg-green-500":s.status==="PAID","bg-teal-200":s.status==="EARLYACCESS","bg-yellow-200":s.status==="PENDING"}),children:s.posOrder??s.status}),e.jsx("div",{children:c?e.jsxs(r.Fragment,{children:[e.jsx(a,{dir:"col",children:e.jsx("span",{className:"text-xs",children:"Erase?"})}),e.jsxs(a,{dir:"row",space:"sm",children:[e.jsx("button",{onClick:()=>m.mutate(s.id),children:e.jsx("span",{className:"px-2 text-xs text-white border rounded-full bg-background-warning",children:"Yes"})}),e.jsx("button",{onClick:()=>n(!1),children:e.jsx("span",{className:"px-2 text-xs border rounded-full",children:"No"})})]})]}):e.jsx("button",{className:"w-6 h-6 border rounded-full bg-background-warning",onClick:()=>n(!0),children:"X"})})]},s.id)),i.length===0&&e.jsx("p",{children:"No bills"})]})})}export{S as default};
